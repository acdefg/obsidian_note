## 亚稳态
亚稳态是指触发器无法在某个规定时间段内达到一个可确认的状态。当一个触发器进入亚稳态时，既无法预测该单元的输出电平，也无法预测何时输出才能稳定在某个正确的电平上。在这个稳定期间，触发器输出一些中间级电平，或者可能处于振荡状态，并且这种无用的输出电平可以沿信号通道上的各个触发器级联式传播下去。

**亚稳态的解决方法**
·1 降低系统时钟
·2 用反应更快的 FF（flip-flop）
·3 引入同步机制，防止亚稳态传播
·4 改善时钟质量，用边沿变化快速的时钟信号
· 关键是器件使用比较好的工艺和时钟周期的裕量要大

### 两级触发器可以防止产生亚稳态
**什么是亚稳态？为什么两级触发器可以防止亚稳态传播？**
亚稳态是指触发器无法在规定的时间段内到达一个可以确认的状态。使用两级触发器来使用异步电路同步化的电路叫做“一位同步器”，只能对一位异步信号进行同步。

两级触发器可以防止亚稳态传播的原理：假设第一级触发器的输入不满足其建立保持时间，它在第一个脉冲沿到来之后输出的数据就为亚稳态，那么在下一个脉冲沿到来之前，其输出的亚稳态数据在一段恢复时间后必须稳定下来，而且稳定得数据必须满足第二级触发器的建立时间，如果都满足了，在下一个脉冲沿到来时，第二级触发器将不会出现亚稳态，因为其输入端的数据满足其建立保持时间。同步器有效的条件：第一级触发器进入到亚稳态后的恢复时间+第二级触发器的建立时间<=时钟周期

## 跨时钟域问题
跨时钟域(CDC)问题分类及对应解决方法
#### 单 bit 数据的传输（电平或者脉冲信号）
1、同步时钟域：
频率相等，相差为 0——同频零相位差时钟：为相同时钟，可以直接采
频率相等，相差固定——同频恒定相位差时钟：需要满足保持/建立时间
频率不等，相差可变——非同频可变相位差时钟，又可分为：
整数倍时钟（频率成倍数）
低频采高频：数据要至少保持目的时钟 clk2 两个周期；有可能出现亚稳态，还可能出现漏采
高频采低频：保证建立/保持时间；有可能出现亚稳态，不可能出现漏采
有理数倍时钟（频率不成倍数）
​​​​​​​​​​​​​​
低频采高频：数据要至少保持目的时钟 clk2 两个周期：肯定出现亚稳态
高频采低频：数据要至少保持目的时钟 clk2 两个周期：肯定出现亚稳态
2、异步时钟域：
高频采低频
​​​​​​​
电平同步器（双锁存）
边沿同步器
脉冲同步器
低频采高频
​​​​​​​​​​​​​​
脉冲同步器
注：
上述几种同步器方法，统称为多级寄存器处理或打拍；关于数据需要保持的时间，不管是快域采慢域，还是慢域采快域，数据都有至少保持慢域的一个时钟周期

#### 多 bit 数据传输（数据总线、地址总线）：
握手信号方法
异步 FIFO（使用 DPRAM 双口ram）


## FIFO
FIFO 的分类根均 FIFO 工作的时钟域，可以将 FIFO 分为同步 FIFO 和异步 FIFO。同步 FIFO 是指读时钟和写时钟为同一个时钟。在时钟沿来临时同时发生读写操作。异步 FIFO 是指读写时钟不一致，读写时钟是互相独立的。
### 同步 fifo
同步 FIFO 的意思是说 FIFO 的读写时钟是同一个时钟，不同于异步 FIFO，异步 FIFO 的读写时钟是完全异步的。同步 FIFO 的对外接口包括时钟，清零，读请求，写请求，数据输入总线，数据输出总线，空以及满信号。下面分别对同步 FIFO 的对外接口信号作一描述：
1． 时钟，输入，用于同步 FIFO 的读和写，上升沿有效；
2． 清零，输入，异步清零信号，低电平有效，该信号有效时，FIFO 被清空；
3． 写请求，输入，低电平有效，该信号有效时，表明外部电路请求向 FIFO 写入数据；
4． 读请求，输入，低电平有效，该信号有效时，表明外部电路请求从 FIFO 中读取数据；
5． 数据输入总线，输入，当写信号有效时，数据输入总线上的数据被写入到 FIFO 中；
6． 数据输出总线，输出，当读信号有效时，数据从 FIFO 中被读出并放到数据输出总线上；
7． 空，输出，高电平有效，当该信号有效时，表明 FIFO 中没有任何数据，全部为空；
8． 满，输出，高电平有效，当该信号有效时，表明 FIFO 已经满了，没有空间可用来存贮数据。

下面的框图主要描述同步FIFO的内部结构，画出框图有助于对电路结构的理解，同样也有助于RTL代码的编写 ：

![这里写图片描述](https://img-blog.csdn.net/20170919092438416?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUGllY2VzX3RoaW5raW5n/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

### 异步 fifo

### reference link