[01.线程-线程的概念和线程标识_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1yJ411S7r6?p=82&vd_source=f8bf73f9a2b495eaf6f8446fa6016bc7)
### 1. 线程的概念

[07:46](https://www.bilibili.com/video/BV1yJ411S7r6?p=82&vd_source=f8bf73f9a2b495eaf6f8446fa6016bc7#t=466.664951)
线程是一个正在运行的函数，比进程更容易通信，共用地址空间
线程有不同的标准，posix 线程是一套标准，还有 openmp 标准
线程标识：pthread_t 有可能是整数、结构体、指针等等，不能用%d 打印
`pthread_equal()`，比较两个线程的 id，编译链接的时候要加 -pthread 选项
makefile
![](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221130171544.png)
`pthread_self()` 返回当前线程标识

`ps axf`  查看进程
`ps axm`  more，更多信息 --线程是一个容器 
`ps ax -L` 以 Linux 的关系来查看当前进程关系，在 linux 环境下，线程可以消耗线程号
在并发中，线程比信号更好用，少了更多的限制
### 2. 线程的创建
[02.线程-线程创建_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1yJ411S7r6?p=83&vd_source=f8bf73f9a2b495eaf6f8446fa6016bc7)
`pthread_create()` 
![](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221130171811.png)
创建线程标识、指定线程的属性（可以写空，跟着默认走）、返回值（不确定）、参数（第四个）
成功返回 0，出错返回 error number（宏，不太是全局变量）
线程的调度取决于调度器策略
#### 例
![200](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221130172419.png)
![200](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221130172522.png)
![200](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221130172626.png)
##### 结果
线程还没来得及调度，进程就结束了，所以只有 begin 和 end 
### 3. 线程的终止，线程的取消选项，栈的清理
[03.线程-线程终止和栈清理_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1yJ411S7r6?p=84&vd_source=f8bf73f9a2b495eaf6f8446fa6016bc7)
#### 线程的终止
线程的终止有三种方式：
1. 线程从启动例程返回，返回值就是线程的退出码
2. 线程可以被同一进程中的其他线程取消
3. 线程调用 pthread_exit()函数
![200](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221130173357.png)
#### 线程的收尸
`pthread_join`  ---> `wait()` ，wait 是阻塞收，这里可以指定收谁
![](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221201133654.png)

可以打印出 thread is working
#### 线程的清理
`pthread_cleanup_push()` 
`pthread_cleanup_pop()` 
![](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221201191644.png)

![](https://raw.githubusercontent.com/acdefg/cdn/main/obsidian/20221201191810.png)


### 4. 线程的同步，线程同步的属性

### 5. 线程和信号，线程和 fork，重入
